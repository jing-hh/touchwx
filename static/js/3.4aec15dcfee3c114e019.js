webpackJsonp([3],{"9bBU":function(e,t,r){r("mClu");var o=r("FeBl").Object;e.exports=function(e,t,r){return o.defineProperty(e,t,r)}},C4MV:function(e,t,r){e.exports={default:r("9bBU"),__esModule:!0}},X2k6:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("//Fk"),l=r.n(o),a=r("bOdI"),i=r.n(a),s=r("I2ex"),n=r("e4gm"),u=r("BWSO"),c=r("DG8g"),m=r("reov"),d={components:{uploadImg:n.a,uploadImgs:u.a,uploadVideo:c.a,editor:m.a},data:function(){var e;return e={dataSuccess:!1,checkAll:!1,loading:!1,temp:""},i()(e,"checkAll",!1),i()(e,"community_id",[]),i()(e,"housetype",[]),i()(e,"decoration",[]),i()(e,"aspect",[]),i()(e,"paytype",[]),i()(e,"tag",[]),i()(e,"matching",[]),i()(e,"ruleForm",{community_id:"",housetype:"",fixture:"",towards:"",bedroom:"",livingroon:"",bathroom:"",area:"",title:"",floor:"",totalfloor:"",video:"",panorama:"",price:"",tag:[],matching:[],pricetype:"",description:"",mentality:"",is_whole:""}),i()(e,"rules",{community_id:[{required:!0,message:"请输入小区名称",trigger:"blur"}],housetype:[{required:!0,message:"请选择",trigger:"change"}],fixture:[{required:!0,message:"请选择",trigger:"change"}],towards:[{required:!0,message:"请选择",trigger:"change"}],bedroom:[{required:!0,message:"请输入",trigger:"blur"}],livingroon:[{required:!0,message:"请输入",trigger:"blur"}],bathroom:[{required:!0,message:"请输入",trigger:"blur"}],area:[{required:!0,message:"请输入",trigger:"blur"}],is_whole:[{required:!0,message:"请选择",trigger:"change"}],price:[{required:!0,message:"请输入金额",trigger:"blur"}],pricetype:[{required:!0,message:"请选择付款方式",trigger:"change"}],title:[{required:!0,message:"请输入标题",trigger:"blur"}]}),e},created:function(){var e=this;this.$route.params.search&&this.remoteMethod(this.$route.params.search),this.$route.query.id?Object(s.g)("get",this.$route.query.id).then(function(t){if(1==t.data.code){var r=t.data.data.agent;e.remoteMethod(r.communityname).then(function(t){e.ruleForm=r,e.ruleForm.matching=r.matching.map(function(e){return Number(e)}),e.ruleForm.matching.length==e.matching.length&&(e.checkAll=!0),e.ruleForm.tag=r.tag.map(function(e){return Number(e)}),e.dataSuccess=!0})}}):this.dataSuccess=!0,Object(s.g)("get").then(function(t){e.matching=t.data.data.matching?t.data.data.matching:[],e.tag=t.data.data.tag,e.paytype=t.data.data.paytype,e.decoration=t.data.data.decoration,e.aspect=t.data.data.aspect,e.housetype=t.data.data.housetype})},computed:{fixture:function(){var e=this,t="";return this.ruleForm.fixture?(this.decoration.forEach(function(r){r.id==e.ruleForm.fixture&&(t=r.paramname)}),t):""},houseName:function(){var e=this,t="";return this.ruleForm.community_id?(this.community_id.forEach(function(r){r.id==e.ruleForm.community_id&&(t=r.communityname)}),t):""},houseTitle:{set:function(e){this.ruleForm.title=e},get:function(){return this.$route.query.id?this.ruleForm.title:this.houseName+" "+this.ruleForm.bedroom+(this.ruleForm.bedroom?"室":"")+this.ruleForm.livingroon+(this.ruleForm.livingroon?"厅":"")+this.ruleForm.bathroom+(this.ruleForm.bathroom?"卫":"")+" "+this.ruleForm.area+(this.ruleForm.area?"平米":"")+" "+this.fixture+" "+this.ruleForm.price+(this.ruleForm.price?"元/月":"")}}},methods:{remoteMethod:function(e){var t=this;return new l.a(function(r,o){t.temp=e,""!==e?(t.loading=!0,Object(s.b)(e).then(function(e){t.community_id=e.data.data_like,t.$route.params.search&&(t.ruleForm.community_id=t.community_id[0].id),r(e)}).catch(function(e){o(e)}),t.loading=!1):(t.community_id=[],r())})},blurMethod:function(e){0==this.community_id.length&&(this.ruleForm.community_id=this.temp)},addCommunity:function(){this.$router.push({name:"addcommunity",params:{type:2,search:this.temp}})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.ruleForm.title=t.houseTitle,Object(s.g)("post","",t.ruleForm).then(function(e){1==e.data.code&&(t.$route.query.id?t.$message.success("编辑成功"):t.$message.success("新增成功"),t.$router.push({name:"rentlists"}))})})},handleCheckAllChange:function(e){this.ruleForm.matching=e?this.matching.map(function(e){return Number(e.id)}):[]},handleCheckedListsChange:function(e){var t=e.length;this.checkAll=t===this.matching.length},changeLogo:function(e,t){this.ruleForm[t]=e},changeImages:function(e){this.ruleForm.images=e},changeVideo:function(e){this.ruleForm.video=e},editors:function(e){this.ruleForm.description=e}}},p={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"public_content"},[r("div",{staticClass:"public_title"},[r("span",[e._v("租房录入房源")]),e._v(" "),r("el-button",{staticClass:"fr",attrs:{icon:"el-icon-back",size:"small"},on:{click:function(t){e.$router.push({name:"rentlists"})}}},[e._v("房源库")])],1),e._v(" "),r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"小区名称",prop:"community_id"}},[r("el-select",{staticStyle:{width:"250px","margin-right":"20px"},attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词","remote-method":e.remoteMethod,loading:e.loading},on:{blur:e.blurMethod},model:{value:e.ruleForm.community_id,callback:function(t){e.$set(e.ruleForm,"community_id",t)},expression:"ruleForm.community_id"}},e._l(e.community_id,function(e){return r("el-option",{key:e.id,attrs:{label:e.communityname,value:e.id}})})),e._v(" "),r("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.community_id.length&&e.temp,expression:"community_id.length == 0 && temp"}],attrs:{type:"primary",round:""},on:{click:e.addCommunity}},[e._v("录入小区")])],1),e._v(" "),r("el-form-item",{staticClass:"inlineBlock",attrs:{label:"房屋情况",prop:"housetype"}},[r("el-select",{attrs:{placeholder:"房屋类型"},model:{value:e.ruleForm.housetype,callback:function(t){e.$set(e.ruleForm,"housetype",t)},expression:"ruleForm.housetype"}},e._l(e.housetype,function(e){return r("el-option",{key:e.id,attrs:{label:e.paramname,value:e.id}})}))],1),e._v(" "),r("el-form-item",{staticClass:"inlineBlock",attrs:{prop:"fixture","label-width":"0"}},[r("el-select",{attrs:{placeholder:"装修程度"},model:{value:e.ruleForm.fixture,callback:function(t){e.$set(e.ruleForm,"fixture",t)},expression:"ruleForm.fixture"}},e._l(e.decoration,function(e){return r("el-option",{key:e.id,attrs:{label:e.paramname,value:e.id}})}))],1),e._v(" "),r("el-form-item",{staticClass:"inlineBlock",attrs:{prop:"towards","label-width":"0"}},[r("el-select",{attrs:{placeholder:"房屋朝向"},model:{value:e.ruleForm.towards,callback:function(t){e.$set(e.ruleForm,"towards",t)},expression:"ruleForm.towards"}},e._l(e.aspect,function(e){return r("el-option",{key:e.id,attrs:{label:e.paramname,value:e.id}})}))],1),e._v(" "),r("div",[r("el-form-item",{staticClass:"inlineBlock",attrs:{label:"户型面积",prop:"bedroom"}},[r("el-input",{staticStyle:{width:"100px"},model:{value:e.ruleForm.bedroom,callback:function(t){e.$set(e.ruleForm,"bedroom",t)},expression:"ruleForm.bedroom"}},[r("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("室")])])],1),e._v(" "),r("el-form-item",{staticClass:"inlineBlock",attrs:{"label-width":"0",prop:"livingroon"}},[r("el-input",{staticStyle:{width:"100px"},model:{value:e.ruleForm.livingroon,callback:function(t){e.$set(e.ruleForm,"livingroon",t)},expression:"ruleForm.livingroon"}},[r("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("厅")])])],1),e._v(" "),r("el-form-item",{staticClass:"inlineBlock",attrs:{"label-width":"0",prop:"bathroom"}},[r("el-input",{staticStyle:{width:"100px"},model:{value:e.ruleForm.bathroom,callback:function(t){e.$set(e.ruleForm,"bathroom",t)},expression:"ruleForm.bathroom"}},[r("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("卫")])])],1),e._v(" "),r("el-form-item",{staticClass:"inlineBlock",attrs:{"label-width":"0",prop:"area"}},[r("el-input",{staticStyle:{width:"100px"},model:{value:e.ruleForm.area,callback:function(t){e.$set(e.ruleForm,"area",t)},expression:"ruleForm.area"}},[r("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("㎡")])])],1),e._v(" "),r("el-form-item",{staticClass:"inlineBlock",staticStyle:{"margin-left":"10px"},attrs:{"label-width":"0",prop:"is_whole"}},[r("el-radio-group",{model:{value:e.ruleForm.is_whole,callback:function(t){e.$set(e.ruleForm,"is_whole",t)},expression:"ruleForm.is_whole"}},[r("el-radio",{attrs:{label:1}},[e._v("整租")]),e._v(" "),r("el-radio",{attrs:{label:2}},[e._v("合租")])],1)],1)],1),e._v(" "),r("el-form-item",{staticClass:"inlineBlock",attrs:{label:"房屋租金",prop:"price"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"0表示面议"},model:{value:e.ruleForm.price,callback:function(t){e.$set(e.ruleForm,"price",t)},expression:"ruleForm.price"}},[r("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("元/月")])])],1),e._v(" "),r("el-form-item",{staticClass:"inlineBlock",attrs:{prop:"pricetype","label-width":"0"}},[r("el-select",{attrs:{placeholder:"付款方式"},model:{value:e.ruleForm.pricetype,callback:function(t){e.$set(e.ruleForm,"pricetype",t)},expression:"ruleForm.pricetype"}},e._l(e.paytype,function(e){return r("el-option",{key:e.id,attrs:{label:e.paramname,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"房屋标题",prop:"title"}},[r("el-input",{staticStyle:{width:"300px"},model:{value:e.houseTitle,callback:function(t){e.houseTitle=t},expression:"houseTitle"}})],1),e._v(" "),r("div",[r("el-form-item",{staticClass:"inlineBlock",attrs:{label:"房屋楼层",prop:"floor"}},[r("el-input",{staticStyle:{width:"100px"},model:{value:e.ruleForm.floor,callback:function(t){e.$set(e.ruleForm,"floor",t)},expression:"ruleForm.floor"}},[r("span",{attrs:{slot:"prefix"},slot:"prefix"},[e._v("第")]),e._v(" "),r("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("层")])])],1),e._v(" "),r("el-form-item",{staticClass:"inlineBlock",attrs:{"label-width":"0",prop:"totalfloor"}},[r("el-input",{staticStyle:{width:"100px"},model:{value:e.ruleForm.totalfloor,callback:function(t){e.$set(e.ruleForm,"totalfloor",t)},expression:"ruleForm.totalfloor"}},[r("span",{attrs:{slot:"prefix"},slot:"prefix"},[e._v("共")]),e._v(" "),r("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("层")])])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"封面图片",prop:"thumb"}},[e.dataSuccess?r("upload-img",{staticStyle:{display:"inline-block"},attrs:{data:e.ruleForm.thumb},on:{onSuccess:function(t){e.changeLogo(t,"thumb")}}}):e._e(),e._v(" "),r("span",{staticClass:"public_littleTip"},[r("i",{staticClass:"iconfont"},[e._v("")]),e._v("单图，供列表页使用")])],1),e._v(" "),r("el-form-item",{attrs:{label:"房源图片",prop:"images"}},[e.dataSuccess?r("upload-imgs",{attrs:{data:e.ruleForm.images},on:{onSuccess:e.changeImages}}):e._e()],1),e._v(" "),r("el-form-item",{attrs:{label:"上传视频",prop:"video"}},[r("upload-video",{on:{onSuccess:e.changeVideo}})],1),e._v(" "),r("el-form-item",{attrs:{label:"VR看房",prop:"panorama"}},[r("el-input",{staticStyle:{width:"300px"},model:{value:e.ruleForm.panorama,callback:function(t){e.$set(e.ruleForm,"panorama",t)},expression:"ruleForm.panorama"}},[r("template",{slot:"prepend"},[e._v("Http://")])],2),e._v(" "),r("span",{staticClass:"public_littleTip"},[r("i",{staticClass:"iconfont"},[e._v("")]),e._v("请输入VR文件的URL")])],1),e._v(" "),r("el-form-item",{attrs:{label:"房屋配置",prop:"matching"}},[r("el-checkbox",{staticStyle:{display:"inline-block"},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),e._v(" "),r("el-checkbox-group",{staticStyle:{display:"inline-block","margin-left":"30px"},on:{change:e.handleCheckedListsChange},model:{value:e.ruleForm.matching,callback:function(t){e.$set(e.ruleForm,"matching",t)},expression:"ruleForm.matching"}},e._l(e.matching,function(t){return r("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v("\n                    "+e._s(t.paramname)+"\n                ")])}))],1),e._v(" "),r("el-form-item",{attrs:{label:"特色标签",prop:"tag"}},[r("el-checkbox-group",{model:{value:e.ruleForm.tag,callback:function(t){e.$set(e.ruleForm,"tag",t)},expression:"ruleForm.tag"}},e._l(e.tag,function(t){return r("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v("\n                    "+e._s(t.paramname)+"\n                ")])}))],1),e._v(" "),r("el-form-item",{attrs:{label:"房屋描述",prop:"description"}},[r("editor",{attrs:{value:e.ruleForm.description},on:{show:e.editors}})],1),e._v(" "),r("el-form-item",{staticStyle:{"margin-bottom":"120px"},attrs:{label:"业主心态",prop:"mentality"}},[r("el-input",{staticStyle:{width:"700px"},attrs:{type:"textarea",rows:6},model:{value:e.ruleForm.mentality,callback:function(t){e.$set(e.ruleForm,"mentality",t)},expression:"ruleForm.mentality"}})],1),e._v(" "),r("el-button",{staticClass:"public_submit",attrs:{type:"primary",round:""},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("确认提交")])],1)],1)},staticRenderFns:[]};var h=r("VU/8")(d,p,!1,function(e){r("gDHc")},"data-v-4d8ce72e",null);t.default=h.exports},bOdI:function(e,t,r){"use strict";t.__esModule=!0;var o,l=r("C4MV"),a=(o=l)&&o.__esModule?o:{default:o};t.default=function(e,t,r){return t in e?(0,a.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},gDHc:function(e,t){},mClu:function(e,t,r){var o=r("kM2E");o(o.S+o.F*!r("+E39"),"Object",{defineProperty:r("evD5").f})}});
//# sourceMappingURL=3.4aec15dcfee3c114e019.js.map