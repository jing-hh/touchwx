webpackJsonp([4],{"+xnO":function(e,t){},"3Lsd":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("I2ex"),a=r("e4gm"),l=r("wsvf"),n={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{directives:[{name:"show",rawName:"v-show",value:this.visible,expression:"visible"}],staticClass:"modal",staticStyle:{"z-index":"2001"},on:{click:this.hide}})},staticRenderFns:[]};var i=r("VU/8")({props:["userInput"],data:function(){return{}},mounted:function(){},methods:{}},n,!1,function(e){r("EfJQ")},"data-v-05b8bcdd",null).exports,s=r("reov"),u=(r("IcnI"),{components:{uploadImg:a.a,vAddress:l.a,editor:s.a,location:i},data:function(){return{flag:!1,decoration:[],housetype:[],feature:[],ruleForm:{thumb:"",community:"",region:null,estate:null,address:"",biulidingtype:[],propertytype:[],feature:[],content:"",lng:"",lat:"",propertyfee:""},rules:{community:[{required:!0,message:"请输入门店名称",trigger:"change"}],lng:[{required:!0,message:"请选择经度"}],lat:[{required:!0,message:"请选择经度"}],estate:[{required:!0,message:"请选择区域和地段"}],address:[{required:!0,message:"请填写详细地址"}]}}},watch:{"ruleForm.community":function(e,t){var r=this;Object(o.b)(this.ruleForm.community).then(function(e){"该小区不存在，可以添加！"==e.data.msg?r.flag=!0:(r.$message.error("此小区已被添加"),r.flag=!1)})}},beforeRouteEnter:function(e,t,r){e.params?r(function(t){t.ruleForm.community=e.params.search}):r()},created:function(){var e=this;Object(o.d)().then(function(t){e.feature=t.data.feature,e.decoration=t.data.decoration,e.housetype=t.data.housetype})},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){return!!e&&(t.flag?void Object(o.a)(t.ruleForm).then(function(e){1==e.data.code?(t.$message.success("添加成功"),1==t.$route.params.type?t.$router.push({name:"addsecondhouse",params:{search:t.ruleForm.community}}):2==t.$route.params.type?t.$router.push({name:"addrent",params:{search:t.ruleForm.community}}):3==t.$route.params.type?t.$router.push({name:"addstore",params:{search:t.ruleForm.community}}):t.$router.push({name:"communitylists"})):t.$message.error("添加失败")}):(t.$message.error("此小区已被添加"),!1))})},changeLogo:function(e){this.ruleForm.thumb=e},loactionChange:function(e){this.ruleForm.lat=e.lat,this.ruleForm.lng=e.lng},emitChange:function(e){this.ruleForm.region=e.region,this.ruleForm.estate=e.estate},editors:function(e){this.ruleForm.content=e},onEditorUploadComplete:function(e){this.content=this.content+"<img src="+e[0].data.filePath+">"}}}),c={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"public_content"},[r("div",{staticClass:"public_title"},[r("span",[e._v("小区录入")]),e._v(" "),r("el-button",{staticClass:"fr",attrs:{icon:"el-icon-back",size:"small"},on:{click:function(t){e.$router.go(-1)}}},[e._v("返回")])],1),e._v(" "),r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"小区名称",prop:"community"}},[r("el-input",{staticStyle:{width:"320px"},model:{value:e.ruleForm.community,callback:function(t){e.$set(e.ruleForm,"community","string"==typeof t?t.trim():t)},expression:"ruleForm.community"}})],1),e._v(" "),r("el-form-item",{staticClass:"inlineBlock",attrs:{label:"小区位置",prop:"estate"}},[r("v-address",{staticClass:"inlineBlock",attrs:{pregion:e.ruleForm.region,pestate:e.ruleForm.estate},on:{emitChange:e.emitChange}})],1),e._v(" "),r("el-form-item",{staticClass:"inlineBlock",attrs:{"label-width":"0",prop:"address"}},[r("el-input",{staticStyle:{width:"270px"},attrs:{placeholder:"请输入详细地址"},model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address","string"==typeof t?t.trim():t)},expression:"ruleForm.address"}})],1),e._v(" "),r("div",[r("el-form-item",{staticClass:"inlineBlock",attrs:{label:"经纬度",prop:"lng"}},[r("el-input",{staticStyle:{width:"150px"},model:{value:e.ruleForm.lng,callback:function(t){e.$set(e.ruleForm,"lng",t)},expression:"ruleForm.lng"}})],1),e._v(" "),r("el-form-item",{staticClass:"inlineBlock",attrs:{"label-width":"0",prop:"lat"}},[r("el-input",{staticStyle:{width:"150px"},model:{value:e.ruleForm.lat,callback:function(t){e.$set(e.ruleForm,"lat",t)},expression:"ruleForm.lat"}}),e._v(" "),r("i",{staticClass:"iconfont inlineBlock",staticStyle:{color:"#36A3F7","padding-left":"20px",cursor:"pointer"},on:{click:function(t){e.$refs.location.visible=!0}}},[e._v("")]),e._v(" "),r("span",{staticClass:"public_littleTip"},[r("i",{staticClass:"iconfont"},[e._v("")]),e._v("点击图标进行标注")]),e._v(" "),r("location",{ref:"location",on:{loactionChange:e.loactionChange}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"物业费",prop:"propertyfee"}},[r("el-input",{staticStyle:{width:"200px"},model:{value:e.ruleForm.propertyfee,callback:function(t){e.$set(e.ruleForm,"propertyfee",t)},expression:"ruleForm.propertyfee"}},[r("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("元/㎡·月")])])],1),e._v(" "),r("el-form-item",{attrs:{label:"小区缩略图",prop:"thumb"}},[r("upload-img",{on:{onSuccess:e.changeLogo}})],1),e._v(" "),r("el-form-item",{attrs:{label:"小区类型",prop:"propertytype"}},[r("el-checkbox-group",{model:{value:e.ruleForm.propertytype,callback:function(t){e.$set(e.ruleForm,"propertytype",t)},expression:"ruleForm.propertytype"}},e._l(e.housetype,function(t){return r("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v("\n                    "+e._s(t.paramname)+"\n                ")])}))],1),e._v(" "),r("el-form-item",{attrs:{label:"建筑形态",prop:"biulidingtype"}},[r("el-checkbox-group",{model:{value:e.ruleForm.biulidingtype,callback:function(t){e.$set(e.ruleForm,"biulidingtype",t)},expression:"ruleForm.biulidingtype"}},e._l(e.decoration,function(t){return r("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v("\n                    "+e._s(t.paramname)+"\n                ")])}))],1),e._v(" "),r("el-form-item",{attrs:{label:"特色标签",prop:"feature"}},[r("el-checkbox-group",{model:{value:e.ruleForm.feature,callback:function(t){e.$set(e.ruleForm,"feature",t)},expression:"ruleForm.feature"}},e._l(e.feature,function(t){return r("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v("\n                    "+e._s(t.paramname)+"\n                ")])}))],1),e._v(" "),r("el-form-item",{staticStyle:{"margin-bottom":"120px"},attrs:{label:"小区介绍"}},[r("editor",{attrs:{value:e.ruleForm.content},on:{show:e.editors,"on-upload-success":e.onEditorUploadComplete}})],1),e._v(" "),r("el-button",{staticClass:"public_submit",attrs:{type:"primary",round:""},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("确认提交")])],1)],1)},staticRenderFns:[]};var m=r("VU/8")(u,c,!1,function(e){r("+xnO")},"data-v-238036ee",null);t.default=m.exports},EfJQ:function(e,t){}});
//# sourceMappingURL=4.eac4865b4404e176907d.js.map