webpackJsonp([19],{y0TG:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("//Fk"),r=a.n(i),l=a("I2ex"),o=a("e4gm"),s=a("BWSO"),n=a("DG8g"),c=a("reov"),u={components:{uploadImg:o.a,uploadImgs:s.a,uploadVideo:n.a,editor:c.a},data:function(){return{dataSuccess:!1,checkAll:!1,temp:"",community_id:[],loading:!1,aspect:[],paytype:[],shoptype:[],franchising:[],certificate:[{id:0,paramname:"不满两年"},{id:1,paramname:"满两年"},{id:2,paramname:"满五年"}],is_division:[{id:0,paramname:"否"},{id:1,paramname:"是"}],tag:[],matching:[],ruleForm:{community_id:"",price:"",area:"",shoptype:"",towards:"",thumb:"",images:[],title:"",description:"",shopnature:"",pay_type:"",is_division:"",face_width:"",floor_height:"",depth:"",franchising:"",matching:[],tag:[]},rules:{community_id:[{required:!0,message:"请输入小区名称",trigger:"change"}],shopnature:[{required:!0,message:"请选择商铺性质"}],shoptype:[{required:!0,message:"请选择商铺类型"}],franchising:[{required:!0,message:"请经营行业"}],is_division:[{required:!0,message:"请选择"}],depth:[{required:!0,message:"请输入进深"}],face_width:[{required:!0,message:"请输入面框"}],area:[{required:!0,message:"请输入面积"}],price:[{required:!0,message:"请输入租金"}],floor_height:[{required:!0,message:"请输入层高"}],pay_type:[{required:!0,message:"请选择付款方式"}]}}},created:function(){var e=this;this.$route.params.search&&this.remoteMethod(this.$route.params.search),this.$route.query.id?Object(l.i)("get",this.$route.query.id).then(function(t){if(1==t.data.code){var a=t.data.data.agent;e.remoteMethod(a.communityname).then(function(t){e.ruleForm=a,e.ruleForm.matching=a.matching.map(function(e){return Number(e)}),e.ruleForm.matching.length==e.matching.length&&(e.checkAll=!0),e.ruleForm.tag=a.tag.map(function(e){return Number(e)}),e.dataSuccess=!0})}}):this.dataSuccess=!0,Object(l.i)("get").then(function(t){e.tag=t.data.data.tag,e.aspect=t.data.data.aspect,e.paytype=t.data.data.paytype,e.franchising=t.data.data.franchising,e.shoptype=t.data.data.shoptype,e.matching=t.data.data.matching?t.data.data.matching:[]})},computed:{shopnature:function(){return 0===this.ruleForm.shopnature?"出租":1==this.ruleForm.shopnature?"出售":2==this.ruleForm.shopnature?"转让":""},houseName:function(){var e=this,t="";return this.ruleForm.community_id?(this.community_id.forEach(function(a){a.id==e.ruleForm.community_id&&(t=a.communityname)}),t):""},houseTitle:{set:function(e){this.ruleForm.title=e},get:function(){return this.$route.query.id?this.ruleForm.title:this.shopnature+" "+this.houseName+" "+this.ruleForm.area+(this.ruleForm.area?"平米":"")+" "+this.ruleForm.price+(this.ruleForm.price?"元/月":"")}}},methods:{remoteMethod:function(e){var t=this;return new r.a(function(a,i){t.temp=e,e?(t.loading=!0,Object(l.b)(e).then(function(e){t.community_id=e.data.data_like,t.$route.params.search&&(t.ruleForm.community_id=t.community_id[0].id),a(e)}).catch(function(e){i(e)}),t.loading=!1):(t.community_id=[],a())})},blurMethod:function(e){0==this.community_id.length&&(this.ruleForm.community_id=this.temp)},addCommunity:function(){this.$router.push({name:"addcommunity",params:{type:3,search:this.temp}})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.ruleForm.title=t.houseTitle,Object(l.i)("post","",t.ruleForm).then(function(e){1==e.data.code&&(t.$route.query.id?t.$message.success("编辑成功"):t.$message.success("新增成功"),t.$router.push({name:"storelists"}))})})},changeLogo:function(e,t){this.ruleForm[t]=e},changeImages:function(e){this.ruleForm.images=e},editors:function(e){this.ruleForm.description=e},handleCheckAllChange:function(e){this.ruleForm.matching=e?this.matching.map(function(e){return Number(e.id)}):[]},handleCheckedListsChange:function(e){var t=e.length;this.checkAll=t===this.matching.length}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"public_content"},[a("div",{staticClass:"public_title"},[a("span",[e._v("商铺录入房源")]),e._v(" "),a("el-button",{staticClass:"fr",attrs:{icon:"el-icon-back",size:"small"},on:{click:function(t){e.$router.push({name:"storelists"})}}},[e._v("房源库")])],1),e._v(" "),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"小区名称",prop:"community_id"}},[a("el-select",{staticStyle:{width:"250px","margin-right":"20px"},attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词","remote-method":e.remoteMethod,loading:e.loading},on:{blur:e.blurMethod},model:{value:e.ruleForm.community_id,callback:function(t){e.$set(e.ruleForm,"community_id",t)},expression:"ruleForm.community_id"}},e._l(e.community_id,function(e){return a("el-option",{key:e.id,attrs:{label:e.communityname,value:e.id}})})),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.community_id.length&&e.temp,expression:"community_id.length == 0 && temp"}],attrs:{type:"primary",round:""},on:{click:e.addCommunity}},[e._v("录入小区")])],1),e._v(" "),a("el-form-item",{attrs:{label:"商铺性质",prop:"shopnature"}},[a("el-radio-group",{model:{value:e.ruleForm.shopnature,callback:function(t){e.$set(e.ruleForm,"shopnature",t)},expression:"ruleForm.shopnature"}},[a("el-radio",{attrs:{label:0}},[e._v("出租")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("出售")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("转让")])],1)],1),e._v(" "),a("el-form-item",{staticClass:"inlineBlock",attrs:{label:"商铺情况",prop:"shoptype"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"商铺类型"},model:{value:e.ruleForm.shoptype,callback:function(t){e.$set(e.ruleForm,"shoptype",t)},expression:"ruleForm.shoptype"}},e._l(e.shoptype,function(e){return a("el-option",{key:e.id,attrs:{label:e.paramname,value:e.id}})}))],1),e._v(" "),a("el-form-item",{staticClass:"inlineBlock",attrs:{prop:"franchising","label-width":"0"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"经营行业"},model:{value:e.ruleForm.franchising,callback:function(t){e.$set(e.ruleForm,"franchising",t)},expression:"ruleForm.franchising"}},e._l(e.franchising,function(e){return a("el-option",{key:e.id,attrs:{label:e.paramname,value:e.id}})}))],1),e._v(" "),a("el-form-item",{staticClass:"inlineBlock",attrs:{prop:"towards","label-width":"0"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"房屋朝向"},model:{value:e.ruleForm.towards,callback:function(t){e.$set(e.ruleForm,"towards",t)},expression:"ruleForm.towards"}},e._l(e.aspect,function(e){return a("el-option",{key:e.id,attrs:{label:e.paramname,value:e.id}})}))],1),e._v(" "),a("el-form-item",{staticClass:"inlineBlock",attrs:{prop:"is_division","label-width":"0"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"是否分割"},model:{value:e.ruleForm.is_division,callback:function(t){e.$set(e.ruleForm,"is_division",t)},expression:"ruleForm.is_division"}},e._l(e.is_division,function(e){return a("el-option",{key:e.id,attrs:{label:e.paramname,value:e.id}})}))],1),e._v(" "),a("el-form-item",{staticClass:"inlineBlock",attrs:{prop:"face_width","label-width":"0"}},[a("el-input",{staticStyle:{width:"100px"},model:{value:e.ruleForm.face_width,callback:function(t){e.$set(e.ruleForm,"face_width",t)},expression:"ruleForm.face_width"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("m")]),a("span",{attrs:{slot:"prefix"},slot:"prefix"},[e._v("面宽")])])],1),e._v(" "),a("el-form-item",{staticClass:"inlineBlock",attrs:{prop:"floor_height","label-width":"0"}},[a("el-input",{staticStyle:{width:"100px"},model:{value:e.ruleForm.floor_height,callback:function(t){e.$set(e.ruleForm,"floor_height",t)},expression:"ruleForm.floor_height"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("m")]),a("span",{attrs:{slot:"prefix"},slot:"prefix"},[e._v("层高")])])],1),e._v(" "),a("el-form-item",{staticClass:"inlineBlock",attrs:{prop:"depth","label-width":"0"}},[a("el-input",{staticStyle:{width:"100px"},model:{value:e.ruleForm.depth,callback:function(t){e.$set(e.ruleForm,"depth",t)},expression:"ruleForm.depth"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("m")]),a("span",{attrs:{slot:"prefix"},slot:"prefix"},[e._v("进深")])])],1),e._v(" "),a("div",[a("el-form-item",{staticClass:"inlineBlock",attrs:{label:"面积租金",prop:"area"}},[a("el-input",{staticStyle:{width:"150px"},model:{value:e.ruleForm.area,callback:function(t){e.$set(e.ruleForm,"area",t)},expression:"ruleForm.area"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("㎡")])])],1),e._v(" "),a("el-form-item",{staticClass:"inlineBlock",attrs:{"label-width":"0",prop:"price"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"0元表示面议"},model:{value:e.ruleForm.price,callback:function(t){e.$set(e.ruleForm,"price",t)},expression:"ruleForm.price"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("元/月")])])],1),e._v(" "),a("el-form-item",{staticClass:"inlineBlock",attrs:{"label-width":"0",prop:"pay_type"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"付款方式"},model:{value:e.ruleForm.pay_type,callback:function(t){e.$set(e.ruleForm,"pay_type",t)},expression:"ruleForm.pay_type "}},e._l(e.paytype,function(e){return a("el-option",{key:e.id,attrs:{label:e.paramname,value:e.id}})}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"房屋标题",prop:"title"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.houseTitle,callback:function(t){e.houseTitle=t},expression:"houseTitle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"封面图片",prop:"thumb"}},[e.dataSuccess?a("upload-img",{staticStyle:{display:"inline-block"},attrs:{data:e.ruleForm.thumb},on:{onSuccess:function(t){e.changeLogo(t,"thumb")}}}):e._e(),e._v(" "),a("span",{staticClass:"public_littleTip"},[a("i",{staticClass:"iconfont"},[e._v("")]),e._v("单图，供列表页使用")])],1),e._v(" "),a("el-form-item",{attrs:{label:"房源图片",prop:"images"}},[e.dataSuccess?a("upload-imgs",{attrs:{data:e.ruleForm.images},on:{onSuccess:e.changeImages}}):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"特色标签",prop:"tag"}},[a("el-checkbox-group",{model:{value:e.ruleForm.tag,callback:function(t){e.$set(e.ruleForm,"tag",t)},expression:"ruleForm.tag"}},e._l(e.tag,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v("\n                    "+e._s(t.paramname)+"\n                ")])}))],1),e._v(" "),a("el-form-item",{attrs:{label:"配套设施",prop:"matching"}},[a("el-checkbox",{staticStyle:{display:"inline-block"},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),e._v(" "),a("el-checkbox-group",{staticStyle:{display:"inline-block","margin-left":"30px"},on:{change:e.handleCheckedListsChange},model:{value:e.ruleForm.matching,callback:function(t){e.$set(e.ruleForm,"matching",t)},expression:"ruleForm.matching"}},e._l(e.matching,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v("\n                    "+e._s(t.paramname)+"\n                ")])}))],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"120px"},attrs:{label:"房屋描述",prop:"description"}},[a("editor",{attrs:{value:e.ruleForm.description},on:{show:e.editors}})],1),e._v(" "),a("el-button",{staticClass:"public_submit",attrs:{type:"primary",round:""},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("确认提交")])],1)],1)},staticRenderFns:[]};var p=a("VU/8")(u,m,!1,function(e){a("z/nj")},"data-v-0b9f2fa7",null);t.default=p.exports},"z/nj":function(e,t){}});
//# sourceMappingURL=19.945ba3befddf148cb356.js.map